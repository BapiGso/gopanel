<!DOCTYPE html>
<html lang="en">
<head x-data>
    <meta charset="utf-8">
    <title x-text="localStorage.title||'GoPanel Dashboard'"></title>
    <link rel="manifest" href="/manifest.webmanifest">
    <script src="/assets/js/tailwind.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet" />
    <link rel="icon" type="image/jpg" href="/assets/img/avatar.webp" />
    <script type="text/javascript" src="/assets/js/alpine.min.js" defer></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#943DA5",
                        secondary: "#10B981",
                    },
                },
            },
        };
    </script>


    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker
                .register('/sw.js') //Service Worker文件路径
                .then(() => { console.log('Service Worker Registered'); });
        }

        // Dark mode toggle functionality
        function toggleDarkMode() {
            const html = document.documentElement;
            const isDark = html.classList.contains('dark');
            if (isDark) {
                html.classList.remove('dark');
                localStorage.setItem('darkMode', 'false');
            } else {
                html.classList.add('dark');
                localStorage.setItem('darkMode', 'true');
            }
        }

        // Initialize dark mode from localStorage
        document.addEventListener('DOMContentLoaded', function() {
            const darkMode = localStorage.getItem('darkMode');
            if (darkMode === 'true' || (darkMode === null && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
            }
        });
    </script>
</head>
<body class="bg-gray-50 dark:bg-gray-900 min-h-screen" x-data="panel">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <aside class="w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col transition-colors duration-300"
               x-data="{
           menu: [
               { name: 'monitor',   href: '/admin/monitor',   icon: 'ri-dashboard-3-line' },
               { name: 'website',   href: '/admin/website',   icon: 'ri-earth-line' },
               { name: 'file',      href: '/admin/file',      icon: 'ri-folder-3-line' },
               { name: 'webdav',    href: '/admin/webdav',    icon: 'ri-cloud-windy-line' },
               { name: 'docker',    href: '/admin/docker',    icon: 'ri-box-3-line' },
               { name: 'frp',       href: '/admin/frp',       icon: 'ri-server-line' },
               { name: 'headscale', href: '/admin/headscale', icon: 'ri-node-tree' },
               { name: 'term',      href: '/admin/term',      icon: 'ri-terminal-box-line' },
               { name: 'cron',      href: '/admin/cron',      icon: 'ri-alarm-line' },
               { name: 'firewall',  href: '/admin/firewall',  icon: 'ri-shield-check-line' },
               { name: 'security',  href: '/admin/security',  icon: 'ri-lock-2-line' }
           ],
           isActive(path) {
               return window.location.pathname.startsWith(path);
           }
       }">

            <!-- Sidebar Header -->
            <div class="h-16 px-6 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between shrink-0">
                <h2 class="font-['Pacifico'] text-2xl text-primary dark:text-purple-400 cursor-pointer hover:scale-105 transition-transform"
                    @click="localStorage.title=prompt('New dashboard name', localStorage.title || 'GoPanel') || localStorage.title; location.reload()"
                    x-text="localStorage.title||'GoPanel'"></h2>

                <!-- Dark Mode Toggle -->
                <button onclick="toggleDarkMode()"
                        class="p-2 rounded-full text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700 transition-colors focus:outline-none">
                    <i class="ri-sun-line dark:hidden text-lg"></i>
                    <i class="ri-moon-line hidden dark:block text-lg"></i>
                </button>
            </div>

            <!-- Navigation Menu -->
            <nav class="flex-1 overflow-y-auto p-4 space-y-1 custom-scrollbar">
                <template x-for="item in menu" :key="item.name">
                    <a :href="item.href"
                       class="flex items-center px-4 py-2.5 rounded-xl transition-all duration-200 group"
                       :class="isActive(item.href)
                   ? 'bg-primary/10 text-primary dark:bg-purple-500/20 dark:text-purple-300 font-medium shadow-sm'
                   : 'text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 hover:text-gray-900 dark:hover:text-gray-200'">

                        <i :class="[item.icon, isActive(item.href) ? 'text-primary dark:text-purple-400' : 'text-gray-400 group-hover:text-gray-600 dark:text-gray-500 dark:group-hover:text-gray-300']"
                           class="text-lg mr-3 transition-colors"></i>

                        <span class="capitalize tracking-wide text-sm" x-text="item.name"></span>

                        <!-- Active Indicator (Optional Dot) -->
                        <div x-show="isActive(item.href)" class="ml-auto w-1.5 h-1.5 rounded-full bg-primary dark:bg-purple-400"></div>
                    </a>
                </template>
            </nav>

        </aside>
        <section class="flex-1 overflow-y-auto p-8 bg-gray-50 dark:bg-gray-900">